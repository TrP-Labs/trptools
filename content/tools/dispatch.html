<!DOCTYPE html>

<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/public/stylesheets/style.css">
        <link rel="stylesheet" type="text/css" href="/public/stylesheets/dispatchStyle.css">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ajv/8.12.0/ajv7.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.min.js"></script>
        <script src="/public/scripts/dispatchHandler.js"></script>
        <script src="/public/scripts/dispatchSolver.js"></script>
        <script src="/public/scripts/dispatchNetwork.js"></script>
        <script src="/public/scripts/dispatchButtons.js"></script>
        <script src="/public/scripts/universalUtils.js"></script>

        <title>TrP Tools - Dispatcher</title>
        <link rel="icon" type="image/png" href="/public/favicon.ico">

        <meta property="og:type" content="website">
        <meta property="og:title" content="TrP Tools - Dispatcher"/>
        <meta property="og:description" content="TrP Tools is an open source web service which aims to provide easy to use tools to the TrP community"/>
        <meta property="og:url" content="https://trptools.tickogrey.com"/>
        <meta property="og:image" content="/public/icon.png"/>

        <script>
            function copyUrl() {
                navigator.clipboard.writeText('https://trptools.com/dispatch/link?roomid=' + currentsocket.roomId)
            }

            // instant connector
            const urlParams = new URLSearchParams(window.location.search);
            const roomId = urlParams.get('roomid');
            if (roomId) {
                window.location = 'https://trptools.com/tools/dispatch'
                connectRoom(roomId)
            } 
        </script>
    </head>

    <body>
        <div class="promptdiv" id="prompt-parent" style="display: none;">
            <h1 id="prompt-title"></h1>
            <p id="prompt-desc">
                
            </p>
            
            <div id="prompt-inputholder"> 
            </div>     

            <div id="prompt-choiceholder"> 
            </div>  

            <div class="alert" id="alert-parent" style="display: none;">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                <p id="alert-text" style="margin: 0;">Alert box</p>
              </div>

            <div id="prompt-buttonholder">          
            </div>
        </div>

        <div id="overlay" class="overlay" style="display: none;"></div>

        <div class="topnavsholder">
            <div class="topnav topnavholder">
                <a href="/">Tools</a>
                <a href="/articles/about">About</a>
                <a href="https://github.com/Ticko-Grey/trptools">Open Source</a>
            </div>
    
            <div class="topnav topnavholder nav-float" style="flex-wrap: wrap;">
                <button class="inputbutton" style="background-color: #4CAF50;" onclick="solveAll()">Solve routes</button>
                <button class="inputbutton" style="background-color: #4cacaf;" onclick="showInput()">Input JSON</button>
                <button class="inputbutton" style="background-color: #af8c4c;" onclick="connectButton()">Connect</button>
                <button class="inputbutton" style="background-color: #5b4caf;" onclick="toggleSV()">Toggle SV manager</button>
                <button class="inputbutton" style="background-color: #585858;" onclick="openSettings()">Settings</button>
            </div>

            <div class="topnav topnavholder nav-right">
                <a id="loginAccount" class="nav-full" href="/auth/login">Login</a>
            </div>
        </div>

        <h2 class="svmodeonly">Service vehicles</h2>
        <table class="styled-table svmodeonly">
            <thead>
                <tr>
                    <th>Vehicle Number</th>
                    <th>Owner</th>
                    <th>Location</th>
                    <th>Available</th>
                    <th>Towing</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="SVtable">

            </tbody>
        </table>

        <h2 class="svmodeonly">Trolleybuses</h2>
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Vehicle Number</th>
                    <th>Owner</th>
                    <th>Route</th>
                    <th>Assigned</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="table">

            </tbody>
        </table>

        <div class="bottombar" id="bottombar" style="display: flex;">
            <div class="vehicles" style="max-width: 50%;">
                <span class="all"></span>
                | <span class="6" style="color: #d5a55d;"></span>
                | <span class="9" style="color: #64ce7b;"></span>
                | <span class="10" style="color: #bbce64;"></span>
                | <span class="14" style="color: #6e6ec4;"></span>
                | <span class="16" style="color: #c86a6a;"></span>
            </div>

            <div class="network" style="max-width: 50%; margin-left: auto; margin-right: 7px; display: none;">
                <button class="inputbutton linebutton" style="background-color: #be5575;" onclick="copyUrl()">Copy url</button>
                | <span class="connectiontype">Master</span>
                | <span class="connectionlatency"></span>
                | <span class="connectionstatus"></span>
                | <span class="connected">1 Connected</span>
            </div>
        </div>
    </body>
</html>